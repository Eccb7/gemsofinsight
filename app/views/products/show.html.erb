<h1 class="hidden">Product show page</h1>
<div class="container mx-auto p-4">
  <!-- Back to All Products Button -->
  <div class="mb-6">
    <%= link_to product_path, class: 'inline-flex items-center text-purple-700 hover:text-purple-900' do %>
      <svg class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Back To All Products
    <% end %>
  </div>

  <div class="flex flex-col lg:flex-row gap-10">
    <!-- Product Image and Thumbnails -->
    <div class="flex flex-col items-center lg:w-1/2">
      <!-- Main Image -->
      <div class="w-full max-w-md mb-4">
        <% if @product.images.attached? %>
          <%= image_tag url_for(@product.images.first), class: 'w-full h-auto object-cover' %>
        <% else %>
          <%= image_tag 'http://via.placeholder.com/512', class: 'w-full h-auto object-cover' %>
        <% end %>
      </div>
      <!-- Thumbnails -->
      <div class="flex gap-2 overflow-x-auto">
        <% @product.images.each do |image| %>
          <%= image_tag url_for(image), class: 'w-24 h-24 object-cover rounded cursor-pointer hover:shadow-lg transition' %>
        <% end %>
      </div>
    </div>

    <!-- Product Details -->
    <div data-controller="products" data-products-product-value="<%= @product.to_json %>" class="flex flex-col items-start lg:w-1/2">
      <h1 class="font-bold text-4xl text-purple-900"><%= @product.name %></h1>
      <p class="text-gray-700 mt-4 text-lg"><%= @product.description %></p>
      <p class="text-2xl text-purple-700 mt-4">Ksh <%= number_with_delimiter(@product.price, delimiter: ',') %></p>

      <!-- Size Selection -->
      <div class="my-8">
        <p class="uppercase text-lg text-gray-900">Size</p>
        <div class="flex gap-2 mt-2">
          <% @product.stocks.each do |stock| %>
            <% if stock.amount > 0 %>
              <button data-action="click->products#selectSize" value="<%= stock.size %>" class="bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                <%= stock.size %>
              </button>
            <% else %> 
              <button disabled value="<%= stock.size %>" class="disabled:bg-gray-400 bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                <%= stock.size %>
              </button>
            <% end %>
          <% end %>
        </div>
      </div>
      <div id="selected-size"></div>

      <!-- Add to Cart Button -->
      <button data-action="click->products#addToCart" class="inline-flex items-center justify-center px-5 py-3 border border-transparent font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 mt-auto">
        Add To Cart
      </button>
    </div>
  </div>
</div>
